<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Intuition about schemes</title>

  <!-- MathJax configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>

  <!-- MathJax -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <link rel="stylesheet" href="style.css">
</head>

<body>

<h2>The formalism of moduli functors</h2>
The first time we encounter moduli spaces, they are said to be spaces whose points are in bijection with isomorphism classes of a given structure. We often give the example of the projective space, or elliptic curves. However the rigorous formalism for this is the following definition, using category theory. In this section, we unpack this definition and in particular, we explain why it generalizes the notion we already knew.

A contravariant functor $F:\mathrm{Sch}\to \mathrm{Sets}$ is called a <em>moduli problem</em>. This is extremely little restrictive, in order to give us the flexibility to classify anything we are interested in. For example, in the case of elliptic curves (over an arbitrary scheme), the moduli functor will associate to a scheme $S$ the set of isomorphism classes of $S$-elliptic curves.

A <em>fine moduli space</em> for a moduli problem $F$ is then simply a scheme $S$ representing $F$.
If $M$ is a fine moduli space for $F$, it means that $F$ is representable by $M$, there exists a natural isomorphism $\tau:F\xrightarrow{\simeq} h^M$, where $h^M=\hom_{\mathrm{Sch}}(-,M)$. 
<h3>Remark</h3>
    In <em>Advanced topics in the arithmetic of elliptic curves</em>, by Joseph H. Silvermam, chapter IV, example 2.1.1, the author explains the intuition behind the description of $h^M(S)=\hom_\mathrm{Sch}(S,M)$ as the $S$-points on $M$, noted $M(S)$. He says the following:

    Let $K$ be a field, $S=\mathrm{Spec} K$ and let $X/K$ be an affine scheme, say given by equations $f_1=\dots = f_r = 0$, with $f_1,\dots,f_r\in K[x_1,\dots,x_n]$. Then
    \begin{align*}
        X(S) &= \{K\text{--morphisms }\Spec K\to X\} \\
        &\cong \left\{ K\text{--algebra homomorphisms }\frac{K[x_1,\dots,x_n]}{(f_1,\dots,f_r)} \to K\right\}\\
        &=\{P \in K^n: f_1(P) =\dots = f_r(P) =0\}.
    \end{align*}
    Thus $X(S)$ agrees with our intuition of what $X(K)$ should be.
<br> <br>
Recall the Yoneda lemma:
$$
\mathrm{Nat}(h^M,F) \cong F(M),
$$
where the map from the RHS to the LHS is $U\mapsto \tau_U$, where for all $S\in \mathrm{Sch}$, $(\tau_U)_S:h^M(S)\to F(S)$ is defined by $f\mapsto F(f)(U)$.

Note that a natural transformation is a natural isomorphism, if and only if it is invertible for every object. Therefore, one has
\begin{align*}
h^M\cong F &\iff \exists \tau \in \mathrm{Nat}(h^M,F): \forall S\in \Sch, \tau_S \text{ is invertible} \\
&\iff \exists U\in F(M): \forall S\in \Sch, (\tau_U)_S \text{ is invertible}.
\end{align*}
Hence, $M$ is a fine moduli space for $F$, if and only if there exists an object $U\in F(M)$ (called universal object<em></em>) such that for all scheme $S$, the map
$$
    M(S) \to F(S), \quad f \mapsto F(f)(U) 
$$
is a natural bijection. This explains why the functorial definition is a generalization of the notion of moduli space simply as a space in bijection with the set of isomorphism classes of some type of object. We no longer consider it as a space whose points are in bijection with classes of some given structure, but rather as a scheme whose $S$-points are in bijection with the classes of a given structure over $S$.

We then have that for any scheme $S$ and any object $V$ over $S$, there exists a unique $f\in M(S)$ such that $V=F(f)(U)$. Most of the time, $F$ acts on morphisms as pullbacks, i.e. $F(f)(U) = U\times_fS$. This gives the following way to view fine moduli spaces:

<h3>Fact</h3>
Let $F:\mathrm{Sch}\to \mathrm{Sets}$ be a contravariant functor that acts on morphisms by pullbacks. 

Then a scheme $M$ is a fine moduli space for $F$ if and only if there exists an object $U\in F(M)$ such that for any scheme $S$ and any $V\in F(S)$, there exists a unique $f:S\to M$ such that
$$
V=U\times_fS,
$$
giving in particular the bijection $M(S)\cong F(S)$.

<h2>Base change of the fine moduli space</h2>
The fine moduli space is so powerful, because it generates all objects over all schemes just by pullbacks by its rational points. However, many times we are only interested in schemes over a given one (e.g. $\mathbb{C}$). Therefore, we would like to have a moduli space with extra properties that is tailored to it.

Assume that $M$ is a fine moduli space for the moduli problem $F$, and assume that $M$ is over a fixed scheme $X$, with stronger properties $P$, like being a curve over $X$.

Now, for an $X$-scheme $Y$ we would like to find a scheme $M_Y$ over $Y$ with property $P$ such that it "does the same". What does this mean formally? For this, we need to change the functor a little bit. We let $F_X:=F|_{\mathrm{Sch}_X}$. We now assume that $M_X\in \mathrm{Sch}_X$ is a fine moduli space for $F_X$ instead of $F$.
This means that for all $S\in \mathrm{Sch}_X$, 
$$
\mathrm{Sch}_X(S,M_X)\cong F_X(S)
$$
naturally.
<h3>Proposition</h2>
    The space $M_Y:=Y\times_X M_X$ is a fine moduli space for the functor $F_Y$.
     
<h4>Proof</h4>
    Let $S\in \mathrm{Sch}_Y$.
    As sets, $F_X(S) = F_Y(S)$. In addition, when considered functors on $\mathrm{Sch}_Y$, it is clear that they are equal. Moreover, $F_X(S)\cong \hom_X(S,M_X)$.
    Now, we can see that we have a bijection $\hom_X(S,M_X) \cong \hom_Y(S,M_Y)$. Indeed, any $f\in \hom_X(S,M_X)$ makes by definition the diagram <br>

<!-- https://q.uiver.app/#q=WzAsNCxbMSwyLCJZIl0sWzIsMiwiWCJdLFsyLDEsIk1fWCJdLFswLDAsIlMiXSxbMCwxXSxbMiwxXSxbMywyLCJmIiwwLHsiY3VydmUiOi0yfV0sWzMsMCwiIiwwLHsiY3VydmUiOjJ9XV0= -->
<iframe class="quiver-embed" src="https://q.uiver.app/#q=WzAsNCxbMSwyLCJZIl0sWzIsMiwiWCJdLFsyLDEsIk1fWCJdLFswLDAsIlMiXSxbMCwxXSxbMiwxXSxbMywyLCJmIiwwLHsiY3VydmUiOi0yfV0sWzMsMCwiIiwwLHsiY3VydmUiOjJ9XV0=&embed" width="432" height="432" style="border-radius: 8px; border: none;"></iframe>
  <br>
commute. Hence, it yields a unique morphism $\overline{f}\in \hom_Y(S,M_Y)$ making the whole diagram commute: <br>
<!-- https://q.uiver.app/#q=WzAsNSxbMSwyLCJZIl0sWzIsMiwiWCJdLFsyLDEsIk1fWCJdLFswLDAsIlMiXSxbMSwxLCJNX1kiXSxbMCwxXSxbMiwxXSxbMywyLCJmIiwwLHsiY3VydmUiOi0yfV0sWzMsMCwiIiwwLHsiY3VydmUiOjJ9XSxbNCwyXSxbNCwwXSxbMyw0LCJcXG92ZXJsaW5le2Z9IiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d -->
<iframe class="quiver-embed" src="https://q.uiver.app/#q=WzAsNSxbMSwyLCJZIl0sWzIsMiwiWCJdLFsyLDEsIk1fWCJdLFswLDAsIlMiXSxbMSwxLCJNX1kiXSxbMCwxXSxbMiwxXSxbMywyLCJmIiwwLHsiY3VydmUiOi0yfV0sWzMsMCwiIiwwLHsiY3VydmUiOjJ9XSxbNCwyXSxbNCwwXSxbMyw0LCJcXG92ZXJsaW5le2Z9IiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&embed" width="432" height="432" style="border-radius: 8px; border: none;"></iframe>
  <br>
  Conversely, given a morphsim in $\hom_Y(S,M_Y)$, postcomposing with the map $M_Y\to M_X$ recovers one in $\hom_X(S,M_X)$.
This then defines a bijection, but does not guarantee that this bijection is natural. For this, assume we have a morphism $\alpha\in \hom_Y(S,S')$. We'd like to make sure that the definition we have just defined makes the diagram <br>
<!-- https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGhvbV9YKFMsTV9YKSJdLFswLDEsIlxcaG9tX1goUycsTV9YKSJdLFsxLDAsIlxcaG9tX1koUyxNX1kpIl0sWzEsMSwiXFxob21fWShTJyxNX1kpIl0sWzAsMl0sWzEsMF0sWzMsMl0sWzEsM11d -->
<iframe class="quiver-embed" src="https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGhvbV9YKFMsTV9YKSJdLFswLDEsIlxcaG9tX1goUycsTV9YKSJdLFsxLDAsIlxcaG9tX1koUyxNX1kpIl0sWzEsMSwiXFxob21fWShTJyxNX1kpIl0sWzAsMl0sWzEsMF0sWzMsMl0sWzEsM11d&embed" width="572" height="304" style="border-radius: 8px; border: none;"></iframe>
  <br>
  commute. Let $f\in \hom_X(S',M_X)$. Then the lower path sends $f$ to $\overline{f}\circ \alpha$, whereas the upper one sends it to $\overline{f\circ \alpha}$. In order to check that the two are equal, it is enough to show that $\overline{f}\circ \alpha$ satisfies the property of $\overline{f\circ \alpha}$, i.e. check that in the diagram <br>
<!-- https://q.uiver.app/#q=WzAsNixbMiwyLCJNX1kiXSxbMywyLCJNX1giXSxbMiwzLCJZIl0sWzMsMywiWCJdLFsxLDEsIlMnIl0sWzAsMCwiUyJdLFswLDFdLFswLDJdLFsyLDNdLFsxLDNdLFs0LDAsIlxcb3ZlcmxpbmV7Zn0iLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNSw0LCJcXGFscGhhIiwxXSxbNCwxLCJmIiwxLHsiY3VydmUiOi0xfV0sWzUsMSwiZlxcY2lyYyBcXGFscGhhIiwxLHsibGFiZWxfcG9zaXRpb24iOjYwLCJjdXJ2ZSI6LTJ9XSxbNSwwLCJcXG92ZXJsaW5le2ZcXGNpcmMgXFxhbHBoYX0iLDEseyJjdXJ2ZSI6LTIsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs0LDIsIiIsMSx7ImN1cnZlIjoxfV0sWzUsMiwiIiwxLHsiY3VydmUiOjJ9XV0= -->
<iframe class="quiver-embed" src="https://q.uiver.app/#q=WzAsNixbMiwyLCJNX1kiXSxbMywyLCJNX1giXSxbMiwzLCJZIl0sWzMsMywiWCJdLFsxLDEsIlMnIl0sWzAsMCwiUyJdLFswLDFdLFswLDJdLFsyLDNdLFsxLDNdLFs0LDAsIlxcb3ZlcmxpbmV7Zn0iLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNSw0LCJcXGFscGhhIiwxXSxbNCwxLCJmIiwxLHsiY3VydmUiOi0xfV0sWzUsMSwiZlxcY2lyYyBcXGFscGhhIiwxLHsibGFiZWxfcG9zaXRpb24iOjYwLCJjdXJ2ZSI6LTJ9XSxbNSwwLCJcXG92ZXJsaW5le2ZcXGNpcmMgXFxhbHBoYX0iLDEseyJjdXJ2ZSI6LTIsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs0LDIsIiIsMSx7ImN1cnZlIjoxfV0sWzUsMiwiIiwxLHsiY3VydmUiOjJ9XV0=&embed" width="560" height="560" style="border-radius: 8px; border: none;"></iframe>
  <br>
  $$\epsilon \circ (\overline{f}\circ \alpha) =(\epsilon \circ \overline{f})\circ \alpha  = f \circ \alpha.$$
which suffices. This proves that $\hom_X(S,M_X)\cong \hom_Y(S,M_Y)$ naturally.
We then have the composition of natural bijections
$$
F_Y(S)=F_X(S) \cong \hom_X(S,M_X) \cong \hom_Y(S,M_Y).
$$

</body>
</html>
