<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Intuition about schemes</title>

  <!-- MathJax configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>

  <!-- MathJax -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="home-text">

We sometimes hear that schemes generalize varieties. But when seeing the construction of schemes, this may not be directly obvious. In this post, we explain how we get to this result and how one should therefore view schemes.
Let $K$ be an algebraically closed field. We will mostly base our study on <a href="https://agag-gathmann.math.rptu.de/class/alggeom-2002/alggeom-2002.pdf">Gathmann's notes</a> and we will often refer to it.
<h2>Introduction</h2>
    <h3>Goal</h3>
The key observation for the upcoming generalization is the following:

<h4>Observation</h4> By remark 4.16, we have a bijection
\begin{align*}
    \frac{\{\text{affine varietes over $K$}\}}{\cong} &\longleftrightarrow \frac{\{\text{finitely generated reduced $K$-algebra}\}}{\cong} \\
    X &\mapsto A(X) 
\end{align*}
Given a field $K$, affine varieties are the same as finitely generated reduced $K$-algebras. It is thus very natural to leverage this correspondence to generalize (affine) varieties: can we construct an object that is in correspondence with rings in general, and that corresponds to varieties in the particular case of finitely generated reduced $K$-algebras?
<h3>Idea</h3>
So how does this correspondence actually work?

Its core idea is: instead of looking at varieties as the set of its points, let's view it as the set of its subvarieties.
  
<h2>Reformulations of affine varieties</h2>
So let's try to reformulate our construction of affine varieties as ringed spaces but with this new viewpoint on them.
<h3>As sets</h3>
As sets, we said that we will focus on the set
$$
X_\mathrm{Sch}:=\{Y: Y \text{ affine irreducible subvariety of }X\}
$$
instead of just $X$. One way to see this pass from one to the other is 
$$
X = \bigcup_{\substack{Y\text{ irreducible} \\  \text{affine s.v. of }X}} Y \mathrel{\leadsto} \{Y: Y\text{ irr. affine s.v. of }X\}.
$$
<h3>As topological spaces</h3>
Now let's give this set a topology inspired by what we have done so far.

In the case of affine varieties, a closed subset is one given by
$$
C= \bigcup_{\substack{Y\subseteq C,\text{ affine}\\
\text{ irreducible}}} Y
$$
where $C$ is affine. So mimicking $\mathrel{\leadsto}$, we can simply define closed subsets of $X_\mathrm{Sch}$ as those of the form
$$
\{Y: Y\subseteq Y_0, Y\text{ affine irreducible}\}
$$
for $Y_0$ affine (not necessarily irreducible).

We can show that this defines a topology.

<h3>As ringed spaces</h3>
Now we want to define a regular function on an open subset of $X_\mathrm{Sch}$. On $U\subseteq X$ open, a regular function is a "local" rational function on $U$ satisfying
$$
\forall x\in U\quad \exists f,g\in A(X), x\in U_x\subseteq U: \forall y\in U_x, f(y) \neq 0, \varphi(y) = \frac{g(y)}{f(y)}.
$$
So now we want to define a regular function on some set of irreducible affine varieties of the form 
$$
U_0=\{Y: Y\nsubseteq Y_0, Y\text{ irreducible affine}\}.
$$
The most natural idea is to say that a function on a set of irreducible affine varieties is a set of functions on each irreducible affine variety. Therefore we will consider on $U_0$ objects of the form $(\varphi_Y)_{Y\in U_0}$. 
But what is $\varphi_{Y'}$ exactly? ($Y'$ being a point that is not the base point called $Y$ but one in its neighborhood $U_Y$). In analogy, it corresponds to $\varphi(y)$. 

First, we know that it must be well-defined on the neighborhood of $x$, i.e. $f(y)\neq 0 \quad \forall y\in U_X$. The way to generalize this is either $$0\notin f(Y') \text{ or }f(Y')\neq \{0\}.$$ The first one corresponds to defining $\varphi_{Y'}$ as a quotient of polynomials and the second as a rational function. So the first one seems more appropriate but this is not the best conceptual way of seeing this. Rather, note that evaluating a regular function at a point should be the same as looking at its class in the stalk around that point. Yet, we have proven in lemma 3.19 that the stalk is the local ring $A(X)_{I(x)}$ by the ideal of polynomials vanishing at $x$. So the way to generalize this is, as in exercise 3.23, to consider the evaluation of $\varphi$ at $Y$ (i.e. $\varphi_Y$) as an element of the stalk at $Y$, which we have proven to be equal to $A(X)_{I(Y)}$. Yet, the second option can be written as $f\notin I(Y)$, which is then the exact generalization of this, in the light of our conclusions on stalks.
So $\varphi_Y$ is a rational function on the open neighborhood around $Y$, i.e. a quotient of two polynomials, the denominator not completely vanishing on $Y$:
$$
\varphi_{Y}\in A(X)_{I(Y)}.
$$
We then have the definition: for all $Y\in U$,
$$
\exists f,g \in A(X), Y\in U_Y \subseteq U: \forall Y'\in U_Y, f\notin I(Y'), \varphi_Y = \frac{g}{f}\in A(X)_{I(Y')}. 
$$
\textbf{Regular functions as functions.}
We may now use this to refine our perception of the elements of the ring as functions.

Note that
$$\mathrm{Frac}R/\mathfrak{p}=R_\mathfrak{p}.$$ By defining $f(\mathfrak{p})=\overline{f}/1\in \mathrm{Frac}R/\mathfrak{p}=R_\mathfrak{p}$, we get
$f(\mathfrak{p})=0\iff f\in \mathfrak{p}$, so
$$
\{\mathfrak{p}:f(\mathfrak{p})=0\}=\{\mathfrak{p}:f\in \mathfrak{p}\} = V(f)
$$
meaning the locus of $f$ as a newly defined function is equal to the "locus" of $f$ as defined by the Zariski topology for schemes.

Therefore with this definition of the evaluation of $f$, we recover the Zariski topology we have defined as the topology of loci of (polynomial) functions. Only now, "functions" are elements in $R$.

Moreover, the sheaf we have defined is the sheafification of the presheaf of rational functions when those functions are elements in $R$, exactly as in the affine case, when the sheaf of regular functions was the sheafification of the presheaf of rational polynomials.
<h2>Schemes</h2>
We can now introduce schemes. We just have to consider $X_\mathrm{Sch}$ as the set of prime ideals of $A(X)$ and rewrite our construction in terms of it:
$$
X_\mathrm{Sch}:=\{\mathfrak{p}: \mathfrak{p} \text{ prime ideal of }A(X)\}=\mathrm{Spec} A(X).
$$
None of what we have done actually relies on $X$ as an affine variety, everything we have done can be written with $R$ any ring instead of $A(X)$.

Let $R$ be a ring. We consider the space $\mathrm{Spec}(R)$. We endow it with the new Zariski topology we have just defined. Explicitly, this yields closed sets of the form 
$$
V(I) = \{\mathfrak{p}: I\subseteq \mathfrak{p}\}
$$
and sections of the form $$\mathcal{O}_{\mathrm{Spec} R}(U)
= \{(\varphi_\mathfrak{p})_{\mathfrak{p}\in U}: \forall \mathfrak{p}\in U\exists f,g\in R,  \mathfrak{p} \in U_\mathfrak{p}\subseteq U\mathrm{ s.t. }\forall \mathfrak{q}\in U_\mathfrak{p}, f\notin\mathfrak{q}, \varphi_\mathfrak{q}=\frac{g}{f}\in R_\mathfrak{q}\}.
$$
<h3>definition</h3>An affine scheme is a ringed space of the form $\mathrm{Spec} R$ with the sheaf we have just defined

<h3>Being defined over some other field</h3>

In remark 1.2 of the <em>Arithmetic of Elliptic Curves</em>, chapter 1, Joseph H. Silverman says that there exist such generators of $I(X)$ if and only if $I(X) =I_0(X)K[t]=I_0(X)\otimes_{K'}K$, where $I_0(X) = I(X)\cap k[t]$. In that case, $I_0(X)$ is exactly the ideal in $k[t]$ generated by them. By simple use of Nullstellensatz, this is equivalent to saying that there exists an affine variety $X_0$ over $k$ such that $I_{k}(X_0) = I_0(X) = I_K(X)\otimes_{K'}K$. Notice that formulating this no longer requires that $k$ is a subfield of $K$, but only that $K$ is a finite $k$-algebra. Therefore, the reformulation of Silverman's notion that corresponds to the right picture is the following:
<br> <br>
If $K$ is a finite $K'$-algebra, we don't say that an affine variety over $K$ is actually also defined over $K'$, but we say that it "originates" from an affine variety $X_0$ over $K'$, whenever we have
$$
I_K(X) = I_{K'}(X_0)\otimes_{K'}K.
$$
<br> <br>
In terms of coordinate rings, writing $K[t]=k[t]\otimes_{K'}K$, this implies that
\begin{align*}
    A_K(X) &= K[t]/I_K(X) = (K'[t]\otimes_{K'} K)/(I_{K'}(X_0)\otimes_{K'}K) \\
    &=(K'[t]/I_{K'}(X_0))\otimes_{K'} K = A_{K'}(X_0) \otimes_{K'} K
\end{align*}
where the second last equality stems from the flatness of $K$ as $K'$-module, due to its freedom.
By doing this we actually do not lose any information, because the converse is also true. Indeed, if we have $A_K(X) = A_{K'}(X_0) \otimes_{K'} K$, then 
\begin{align*}
I_K(X) &= \ker\left(K'[t]\otimes_{K'}K\to\frac{K'[t]}{I_{K'}(X_0)}\otimes_{K'}K\right) \\
&= \ker\left(\left( K'[t]\to\frac{K'[t]}{I_{K'}(X_0)}\right)\otimes_{K'}\mathrm{id}_K \right) \\
&=I_{K'(X_0)} \otimes_{K'}K.
\end{align*}
Therefore we may as well take that as a definition condition:
<br> <br>
Let $K'\to K$ be a finite extension of fields and $X$ be a variety over $K$, then we say that $X$ originates from a variety over $K'$ if there exists a variety $X_0$ over $K'$ such that
$$
A_K(X) = A_{K'}(X_0)\otimes_{K'} K.
$$
<br> <br>
In terms of schemes, this is the same as saying that
$$  \mathrm{Spec} A_K(X) = \mathrm{Spec} A_{K'}(X_0) \times_{\mathrm{Spec} {K'}} \mathrm{Spec} K.
$$
Then we can generalize this to the following definition. 
<br> <br>
Let $S$ be a scheme over $K$. Then we say that $S$ originates from a scheme over $K'$ if there exists a scheme $T$ over $K'$ such that
$$
S=T\times_{\mathrm{Spec} {K'}} \mathrm{Spec} K.
$$
<br> <br>
We can even easily generalize this even further. If $S$ is a scheme over $U$ and $U$ is a scheme over $U'$, then $S$ originates from a scheme over $U'$ if there exists a scheme $T$ over $U'$ such that 
$$
S=T\times_{U'}U.
$$
In terms of diagrams, this means that there exists a morphism $S\to T$ such that the diagram <br>
<!-- https://q.uiver.app/#q=WzAsNCxbMCwwLCJTIl0sWzEsMCwiVCJdLFswLDEsIlUiXSxbMSwxLCJVJyJdLFsxLDNdLFswLDJdLFswLDFdLFsyLDNdXQ== -->
<iframe class="quiver-embed" src="https://q.uiver.app/#q=WzAsNCxbMCwwLCJTIl0sWzEsMCwiVCJdLFswLDEsIlUiXSxbMSwxLCJVJyJdLFsxLDNdLFswLDJdLFswLDFdLFsyLDNdXQ==&embed" width="200" height="200" style="border-radius: 8px; border: none;"></iframe>
<br>
    is cocartesian.
Hence, we will say for example that an elliptic curve $E$ over a field $K$ originates from a scheme over $\mathbb{Z}$ if there exists a scheme $T$ (automatically over $\mathbb{Z}$) such that
$$
\mathrm{Spec} K[E] = T\times_{\mathrm{Spec} \mathbb{Z}} \mathrm{Spec} K
$$
where $K[E]$ is just Silverman's notation for the coordinate ring.


</body>
  
</html>
